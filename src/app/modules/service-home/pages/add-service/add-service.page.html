<ion-header>
  <ion-toolbar class="header">
    <ion-title>Agregar Servicio</ion-title>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid class="main-container">
    <!-- Título principal -->
    <ion-row>
      <ion-col size="12">
        <h1 class="main-title">Información del Servicio</h1>
      </ion-col>
    </ion-row>

    <!-- Formulario Detalles del Servicio -->
    <ion-row>
      <ion-col size="12">
        <div class="section">
          <h2 class="section-title">Detalles del Servicio</h2>
          <form [formGroup]="form" class="form-container">
            <ion-item>
              <ion-icon slot="start" name="pricetag-outline"></ion-icon>
              <ion-label position="stacked">Nombre del Servicio</ion-label>
              <ion-input formControlName="name"></ion-input>
            </ion-item>

            <ion-item>
              <ion-icon slot="start" name="list-outline"></ion-icon>
              <ion-label position="stacked">Categoría</ion-label>
              <ion-select formControlName="category" placeholder="Seleccione una categoría">
                <ion-select-option *ngFor="let category of categories" [value]="category.name">
                  {{ category.name }}
                </ion-select-option>
              </ion-select>
            </ion-item>

            <ion-item>
              <ion-icon slot="start" name="document-text-outline"></ion-icon>
              <ion-label position="stacked">Descripción</ion-label>
              <ion-textarea formControlName="description"></ion-textarea>
            </ion-item>
          </form>
        </div>
      </ion-col>
    </ion-row>

    <!-- Sección Imagen del Servicio -->
    <ion-row>
      <ion-col size="12">
        <div class="section">
          <h2 class="section-title">Imagen del Servicio</h2>
          <div class="photo-container">
            <ion-avatar *ngIf="localImage" class="service-avatar">
              <img [src]="localImage" alt="Imagen del Servicio" />
            </ion-avatar>
            <ion-icon class="image-icon" *ngIf="!localImage" name="image-outline"></ion-icon>
            <ion-button class="custom-button" size="small" (click)="selectPhoto()">
              Subir Imagen
            </ion-button>
          </div>
        </div>
      </ion-col>
    </ion-row>

    <!-- Sección Horario de Atención -->
    <ion-row>
      <ion-col size="12">
        <div class="section">
          <h2 class="section-title">Horario de Atención</h2>
          <form [formGroup]="form" class="form-container">
            <ion-item>
              <ion-icon slot="start" name="calendar-outline"></ion-icon>
              <ion-label position="stacked">Días de Atención</ion-label>
              <ion-select formControlName="availableDays" multiple="true">
                <ion-select-option *ngFor="let day of allDays" [value]="day.value">
                  {{ day.label }}
                </ion-select-option>
              </ion-select>
            </ion-item>

            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <ion-item>
                    <ion-icon slot="start" name="time-outline"></ion-icon>
                    <ion-label position="stacked">Horario de Apertura</ion-label>
                    <ion-input type="time" formControlName="startTime"></ion-input>
                  </ion-item>
                </ion-col>
                <ion-col size="6">
                  <ion-item>
                    <ion-icon slot="start" name="time-outline"></ion-icon>
                    <ion-label position="stacked">Horario de Cierre</ion-label>
                    <ion-input type="time" formControlName="endTime"></ion-input>
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-grid>
          </form>
        </div>
      </ion-col>
    </ion-row>

    <!-- Botón Guardar -->
    <ion-row>
      <ion-col size="12">
        <ion-button expand="block" type="submit" class="save-button" (click)="submit()" [disabled]="isFormInvalid">
          Guardar Servicio
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<!-- Barra inferior -->
<app-bottom-nav></app-bottom-nav>
